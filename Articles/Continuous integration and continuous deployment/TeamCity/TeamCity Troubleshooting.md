В прошлой статье был описан процесс установки и начальной настройки TeamCity.
Одна у вас могут возникнуть некоторые проблемы на этапе настройки. В данной
статье я постараюсь описать часто встречающиеся проблемы и способы их решения.

При первой установки TeamCity у меня возникли пробюлемы на этапе подключения TC
к базе данных.

Напомню, что мы используем MS SQL Server в качестве СУБД. Первое что нам
необходимо сделать - это скачать и поместить в нужную директорию драйвер для
подключения. С этим не должно возникнуть проблем, так как ссылки на драйвер и
нужные директории описаны в предидущей статье.

Следующим шагом нам нужно будет создать базу данных. Назовём её TeamCity.

![](<imgs/TCDB.png>)

Пока оставляем пустую БД и возвращаемся к настройкам TC. Вводим имя базы данных
и метод авторизации. В случае, если вы использует аккаунт пользователя, то
вводите также логин и пароль.

![](<imgs/StartSettings.png>)

Подтверждаем наши настройки. И в полне вероятно что мы получаем следущую ошибку.

![](<imgs/FirstException.png>)

Решение данной проблемы хорошо описано
[здесь](<http://www.mikeobrien.net/blog/teamcity-sqlserver-integrated-security/>).
Но я в кратце приведу решение данной проблемы на русском.

1.  Заходим в скачанный нами драйвер и находим sqljdbc\_auth.dll в директории
    enu\\auth\\x64 (x64 либо x86 завист от разрядности вашей операционной
    системы). Копируем этот файл в \<TeamCityHomeDir\>\\bin.

2.  Скачиваем
    [tar.gz](<http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1880261.html>)
    для своей ОС и раскаповуем его с помощью архиватора.

3.  Останавливаем TeamCity Service и TCBuildAgent, удаляем содержимое в
    \<TeamCityHomeDir\>\\jre и копируем туда скачанные нами файлы.

4.  Запускаем сервисы.

На этом данная проблема решена, потверждаем наши настройки, но получаем
следующее исключение

![](<imgs/SecondException.png>)

Решить данную проблему не составит труда. Всё что нам нужно это зайти в
Microsoft SQL Server Management Studio, открыть каталог Security и под ним
Login. Далее выбираем пользователя под которым мы пытаемся зайти в базу данных и
открываем его свойства. Далее открываем страничку User Mapping и отмечаем нашу
базу данных.

![](<imgs/UserProperties.png>)

 

Ещё одна проблема, с которой я столкнулся при настройке.

![](<imgs/ThirdException.png>)

Тоже ничего смертельного, решается довольно элементарно.

Заходим в нашу базу данных, открываем Security/Users, выбираем нашего
пользователя и открываем свойства. Открываем вкладку Membership и ставик отметку
возле db\_owner.

![](<imgs/Owner.png>)

 

Это все ошибки с которыми я столкнулся при первой установке, надеюсь данная
статья поможет вам в быстром решении проблем с настройках.
